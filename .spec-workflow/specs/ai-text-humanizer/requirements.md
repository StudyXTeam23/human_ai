# AI 文本人性化重写系统 - 需求规格说明书

## 1. 项目概述

### 1.1 项目名称
AI 文本人性化重写系统 (AI Text Humanizer)

### 1.2 项目目标
开发一个 Web 应用程序,允许用户输入 AI 生成的文本或上传文档,通过智能算法将其转换为更自然、更具人类风格的内容,同时提供灵活的参数控制和输出管理功能。

### 1.3 项目背景
随着 AI 生成内容的普及,越来越多的用户需要将 AI 生成的文本转换为更自然、更符合人类写作风格的内容。本系统旨在提供一个简单易用的工具,帮助用户实现这一目标,同时确保内容质量和用户体验。

### 1.4 项目范围
- 支持文本和文档两种输入方式
- 提供多种参数控制(长度、相似度、风格)
- 实时字符计数和验证
- 输出结果的复制、下载和重新生成
- 历史记录管理(最近3条)
- 响应式设计,支持移动端

## 2. 功能需求

### 2.1 输入管理

#### FR-2.1.1 文本输入
**作为** 用户  
**我想要** 在文本框中输入或粘贴文本  
**以便** 快速提交需要人性化的内容  

**验收标准:**
- **当** 输入模式为"文本"时
- **则** 显示一个多行文本输入框
- **并且** 文本框支持自动高度调整
- **并且** 显示实时字符计数 (格式: current/5000)
- **并且** 字符数少于 300 时,显示红色错误提示 "最少需要 300 个字符"
- **并且** 字符数超过 5000 时,显示红色错误提示 "最多支持 5000 个字符" 并禁用提交按钮

#### FR-2.1.2 文档上传
**作为** 用户  
**我想要** 上传文档文件  
**以便** 批量处理长文本内容  

**验收标准:**
- **当** 输入模式为"文档"时
- **则** 显示拖拽上传区域
- **并且** 支持点击选择文件或拖拽上传
- **并且** 仅接受 PDF、PPT、DOCX、TXT 格式文件
- **并且** 文件大小不超过 40MB
- **并且** 上传后显示文件名、文件大小
- **并且** 提供移除按钮以删除已上传文件
- **并且** 文件不符合要求时显示明确的错误提示

#### FR-2.1.3 字符统计
**作为** 用户  
**我想要** 实时看到字符计数  
**以便** 控制输入内容的长度  

**验收标准:**
- **当** 用户输入或删除文本时
- **则** 实时更新字符计数显示
- **并且** 使用 `TextEncoder().encode(text).length` 统计字符数
- **并且** 显示格式为 "当前字符数/5000"
- **并且** 字符数 < 300 时,计数器显示红色
- **并且** 字符数 > 5000 时,计数器显示红色

### 2.2 参数配置

#### FR-2.2.1 长度参数
**作为** 用户  
**我想要** 选择输出文本的长度  
**以便** 控制重写后的内容篇幅  

**验收标准:**
- **当** 用户选择长度参数时
- **则** 提供三个选项: Normal(正常)、Concise(简洁)、Expanded(扩展)
- **并且** 默认选项为 "Normal"
- **并且** 通过下拉选择框进行选择

#### FR-2.2.2 相似度参数
**作为** 用户  
**我想要** 选择输出文本与原文的相似度  
**以便** 平衡改写程度和原意保留  

**验收标准:**
- **当** 用户选择相似度参数时
- **则** 提供四个选项: Low(低)、Moderate(中等)、High(高)、Neutral(中性)
- **并且** 默认选项为 "Moderate"
- **并且** 通过下拉选择框进行选择

#### FR-2.2.3 风格参数
**作为** 用户  
**我想要** 选择输出文本的写作风格  
**以便** 适应不同的使用场景  

**验收标准:**
- **当** 用户选择风格参数时
- **则** 提供九个选项: Neutral(中性)、Academic(学术)、Business(商务)、Creative(创意)、Technical(技术)、Friendly(友好)、Informal(非正式)、Reference(参考)、Custom(自定义)
- **并且** 默认选项为 "Neutral"
- **并且** 通过下拉选择框进行选择
- **并且** 当选择 "Custom" 时,显示额外的文本输入框
- **并且** 自定义风格描述最多 120 个字符
- **并且** 未填写自定义描述时显示错误提示

### 2.3 处理与输出

#### FR-2.3.1 人性化处理
**作为** 用户  
**我想要** 点击"Humanize"按钮处理文本  
**以便** 获得人性化的重写结果  

**验收标准:**
- **当** 用户点击"Humanize"按钮时
- **则** 验证输入内容和参数
- **并且** 输入有效时,发送请求到后端 API
- **并且** 请求期间显示加载状态(按钮显示 spinner)
- **并且** 输出区域显示骨架屏(skeleton)
- **并且** 请求成功后显示重写结果
- **并且** 请求失败时显示错误提示(toast + 内联错误)
- **并且** 将成功结果保存到历史记录

#### FR-2.3.2 结果展示
**作为** 用户  
**我想要** 清晰地查看重写结果  
**以便** 评估输出质量  

**验收标准:**
- **当** 处理完成时
- **则** 在左侧卡片中显示重写后的文本
- **并且** 显示重写后的字符数
- **并且** 提供"复制"、"下载 .txt"、"重新生成"三个操作按钮
- **并且** 在右侧卡片中显示"微调器"
- **并且** 微调器包含语气滑块、句长滑块等前端调整选项

#### FR-2.3.3 复制功能
**作为** 用户  
**我想要** 复制重写后的文本  
**以便** 在其他地方使用  

**验收标准:**
- **当** 用户点击"复制"按钮时
- **则** 将重写文本复制到剪贴板
- **并且** 显示成功提示(toast: "已复制到剪贴板")
- **并且** 复制失败时显示错误提示

#### FR-2.3.4 下载功能
**作为** 用户  
**我想要** 下载重写后的文本为 .txt 文件  
**以便** 保存和分享结果  

**验收标准:**
- **当** 用户点击"下载 .txt"按钮时
- **则** 生成包含重写文本的 .txt 文件
- **并且** 文件名格式为 "humanized_text_YYYYMMDD_HHMMSS.txt"
- **并且** 自动触发下载

#### FR-2.3.5 重新生成功能
**作为** 用户  
**我想要** 重新生成结果  
**以便** 获得不同的改写版本  

**验收标准:**
- **当** 用户点击"重新生成"按钮时
- **则** 使用相同的输入和参数重新请求 API
- **并且** 显示加载状态
- **并且** 更新输出结果

#### FR-2.3.6 清空功能
**作为** 用户  
**我想要** 清空当前输入和输出  
**以便** 开始新的处理任务  

**验收标准:**
- **当** 用户点击"Clear"按钮时
- **则** 清空文本输入框
- **并且** 移除已上传的文件
- **并且** 清空输出结果
- **并且** 参数重置为默认值
- **并且** 字符计数重置为 0/5000

### 2.4 历史记录

#### FR-2.4.1 历史记录显示
**作为** 用户  
**我想要** 查看最近的处理记录  
**以便** 快速访问之前的结果  

**验收标准:**
- **当** 页面加载时
- **则** 从 LocalStorage 读取历史记录
- **并且** 显示最近 3 条记录
- **并且** 每条记录显示: 前 100 字预览、参数摘要、时间戳
- **并且** 按时间倒序排列

#### FR-2.4.2 历史记录回填
**作为** 用户  
**我想要** 点击历史记录  
**以便** 重新查看或编辑之前的内容  

**验收标准:**
- **当** 用户点击历史记录条目时
- **则** 将对应的输入文本和参数回填到表单
- **并且** 显示对应的输出结果
- **并且** 不自动触发新的处理请求

### 2.5 表单验证

#### FR-2.5.1 输入验证
**作为** 系统  
**我需要** 验证用户输入  
**以便** 确保数据有效性  

**验收标准:**
- **当** 用户提交表单时
- **则** 验证以下规则:
  - 模式为"文本"时: 文本长度 ≥ 300 且 ≤ 5000 字符
  - 模式为"文档"时: 已上传有效文件
  - 风格为"自定义"时: 已填写自定义描述(≤ 120 字符)
- **并且** 验证失败时显示具体错误信息
- **并且** 禁用提交按钮直到验证通过

## 3. 非功能需求

### 3.1 性能需求

#### NFR-3.1.1 响应时间
- API 响应时间 < 2000ms (模拟延迟 800-1200ms)
- 页面首次加载时间 < 3s
- 交互响应时间 < 100ms

#### NFR-3.1.2 文档处理
- 文档上传成功率 > 95%
- 文档解析成功率 > 90%
- 文档内容超过 5000 字符时自动截断并提示

### 3.2 可用性需求

#### NFR-3.2.1 无障碍性
- 符合 WCAG AA 级别对比度标准
- 所有交互控件具有适当的 `aria-*` 属性
- 所有表单元素具有关联的 `label`
- 支持键盘导航(Tab、Enter、Escape)
- 屏幕阅读器友好

#### NFR-3.2.2 响应式设计
- 支持桌面端(≥1024px)
- 支持平板端(768px - 1023px)
- 支持移动端(< 768px)
- 移动端参数条折叠为 Drawer
- 移动端双栏布局改为单栏

### 3.3 兼容性需求

#### NFR-3.3.1 浏览器兼容
- Chrome (最新版本及前 2 个版本)
- Firefox (最新版本及前 2 个版本)
- Safari (最新版本及前 2 个版本)
- Edge (最新版本及前 2 个版本)

### 3.4 安全性需求

#### NFR-3.4.1 数据安全
- 用户输入数据不存储到服务器(仅模拟演示)
- 历史记录仅保存在客户端 LocalStorage
- 文件上传前进行格式和大小验证
- 防止 XSS 攻击(内容转义)

### 3.5 可维护性需求

#### NFR-3.5.1 代码质量
- 使用 TypeScript 严格模式,不允许 `any` 类型
- 通过 ESLint 和 Prettier 检查
- 组件化开发,单一职责原则
- 关键功能有单元测试覆盖(vitest)

#### NFR-3.5.2 文档要求
- README 包含项目说明、安装步骤、运行命令
- 代码注释清晰,复杂逻辑有说明
- API 接口有明确的类型定义

## 4. 技术约束

### 4.1 技术栈
- 前端: Next.js 14 (App Router)
- 语言: TypeScript
- 样式: TailwindCSS
- UI 组件: shadcn/ui
- 表单: React Hook Form + Zod
- 图标: lucide-react
- 测试: vitest

### 4.2 开发约束
- 不集成真实 AI 模型
- 使用模拟 API 接口进行演示
- 优先考虑代码结构和可扩展性
- 遵循 Next.js 和 React 最佳实践

## 5. 用户界面需求

### 5.1 页面布局(从上到下)
1. 标题与副标题
   - 主标题: "Free AI Humanizer – 100% Human-Written Quality"
   - 副标题: 简短说明 + 免责声明 Tooltip
2. 输入区域
   - Tabs: Text / Document
   - 文本输入框或文档上传区
3. 参数控制条
   - Length、Similarity、Style 三个下拉选择
   - Style=Custom 时显示自定义输入框
4. 操作按钮区
   - Humanize (主按钮)
   - Clear (次按钮)
5. 输出区域
   - 左侧: 结果卡片(Copy、Download、Regenerate)
   - 右侧: 微调器卡片(前端参数调整)
6. 历史记录区
   - 最近 3 条记录,点击可回填
7. 页脚
   - 免责声明与相关链接

### 5.2 交互状态
- **空闲状态**: 等待用户输入
- **输入中**: 实时字符计数,错误提示
- **验证失败**: 禁用按钮,显示错误
- **处理中**: 按钮 loading,输出区 skeleton
- **成功**: 显示结果,保存历史
- **错误**: Toast + 内联错误信息

### 5.3 视觉设计
- 主色调: #137fec (蓝色)
- 背景色(浅色): #f6f7f8
- 背景色(深色): #101922
- 字体: Inter
- 圆角: 0.25rem (默认), 0.5rem (lg), 0.75rem (xl)
- 阴影: 使用 TailwindCSS shadow-* 系列

## 6. SEO 需求

### 6.1 元信息
- 页面标题: "Free AI Humanizer – Make AI Text Sound Human"
- 描述: "Transform AI-generated content into natural, human-like text. Support text input and document upload (PDF/PPT/DOCX/TXT). 100% free and easy to use."
- Open Graph 标签: 标题、描述、图片
- Twitter Card 标签

## 7. 免责声明

### 7.1 内容
本工具仅为演示目的,不保证能够通过任意"AI 检测器"。请用户合法、合规使用本工具,遵守学术诚信和职业道德。

### 7.2 显示位置
- 页面顶部标题旁的 Tooltip
- 页面底部 Footer

## 8. 验收标准 (DoD)

### 8.1 功能完整性
- ✅ 文本和文档两种输入路径均可用
- ✅ 严格满足 min 300 / max 5000 字符限制
- ✅ 三个参数(Length、Similarity、Style)可选并参与请求
- ✅ Style=Custom 时需填写自定义描述(≤120 字符)
- ✅ 输出可复制、下载、重新生成
- ✅ 历史记录可回填
- ✅ 移动端布局正常

### 8.2 技术验收
- ✅ 代码通过 `pnpm build` 构建
- ✅ `pnpm test` 基础用例通过
- ✅ ESLint 无错误
- ✅ TypeScript 严格模式无错误
- ✅ 无障碍性符合 WCAG AA 标准

### 8.3 用户体验
- ✅ 页面加载流畅,无明显卡顿
- ✅ 错误提示明确友好
- ✅ 加载状态清晰可见
- ✅ 移动端操作便捷

## 9. 项目里程碑

### 9.1 阶段 1: 需求分析与设计 (当前)
- 完成需求文档
- 完成技术设计文档
- 完成任务分解

### 9.2 阶段 2: 前端基础架构
- Next.js 项目初始化
- shadcn/ui 组件集成
- 表单验证框架搭建

### 9.3 阶段 3: 核心功能开发
- 输入管理(文本+文档)
- 参数控制
- 模拟 API 接口

### 9.4 阶段 4: 输出与交互
- 结果展示
- 复制/下载/重新生成
- 历史记录

### 9.5 阶段 5: 优化与测试
- 响应式适配
- 无障碍性优化
- 单元测试
- 性能优化

### 9.6 阶段 6: 部署上线
- 构建优化
- 文档完善
- 部署配置

## 10. 风险与假设

### 10.1 风险
- **风险 1**: 文档解析复杂度可能超出预期
  - 缓解措施: 使用成熟的文档解析库,初期仅支持基础文本提取
- **风险 2**: 移动端性能可能受限
  - 缓解措施: 优化打包体积,使用代码分割,懒加载非关键组件

### 10.2 假设
- 用户具备基本的网页操作能力
- 用户使用现代浏览器(支持 ES6+)
- 用户上传的文档格式规范,可正常解析

## 11. 术语表

| 术语 | 定义 |
|------|------|
| AI Humanizer | 将 AI 生成的文本转换为更自然、更具人类风格的工具 |
| WCAG AA | Web Content Accessibility Guidelines 2.0 AA 级别 |
| shadcn/ui | 基于 Radix UI 和 Tailwind CSS 的组件库 |
| Toast | 临时弹出提示消息 |
| Skeleton | 加载时的占位符动画 |
| LocalStorage | 浏览器本地存储 API |
| App Router | Next.js 14 的新路由系统 |

---

**文档版本**: 1.0  
**创建日期**: 2025-10-22  
**最后更新**: 2025-10-22  
**状态**: 待审核

