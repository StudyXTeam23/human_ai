{
  "id": "snapshot_1761118327402_shc2hiw9s",
  "approvalId": "approval_1761118327396_cv99yjvqq",
  "approvalTitle": "需求规格说明书 (requirements.md) - AI 文本人性化重写系统",
  "version": 1,
  "timestamp": "2025-10-22T07:32:07.402Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# AI 文本人性化重写系统 - 需求规格说明书\n\n## 1. 项目概述\n\n### 1.1 项目名称\nAI 文本人性化重写系统 (AI Text Humanizer)\n\n### 1.2 项目目标\n开发一个 Web 应用程序,允许用户输入 AI 生成的文本或上传文档,通过智能算法将其转换为更自然、更具人类风格的内容,同时提供灵活的参数控制和输出管理功能。\n\n### 1.3 项目背景\n随着 AI 生成内容的普及,越来越多的用户需要将 AI 生成的文本转换为更自然、更符合人类写作风格的内容。本系统旨在提供一个简单易用的工具,帮助用户实现这一目标,同时确保内容质量和用户体验。\n\n### 1.4 项目范围\n- 支持文本和文档两种输入方式\n- 提供多种参数控制(长度、相似度、风格)\n- 实时字符计数和验证\n- 输出结果的复制、下载和重新生成\n- 历史记录管理(最近3条)\n- 响应式设计,支持移动端\n\n## 2. 功能需求\n\n### 2.1 输入管理\n\n#### FR-2.1.1 文本输入\n**作为** 用户  \n**我想要** 在文本框中输入或粘贴文本  \n**以便** 快速提交需要人性化的内容  \n\n**验收标准:**\n- **当** 输入模式为\"文本\"时\n- **则** 显示一个多行文本输入框\n- **并且** 文本框支持自动高度调整\n- **并且** 显示实时字符计数 (格式: current/5000)\n- **并且** 字符数少于 300 时,显示红色错误提示 \"最少需要 300 个字符\"\n- **并且** 字符数超过 5000 时,显示红色错误提示 \"最多支持 5000 个字符\" 并禁用提交按钮\n\n#### FR-2.1.2 文档上传\n**作为** 用户  \n**我想要** 上传文档文件  \n**以便** 批量处理长文本内容  \n\n**验收标准:**\n- **当** 输入模式为\"文档\"时\n- **则** 显示拖拽上传区域\n- **并且** 支持点击选择文件或拖拽上传\n- **并且** 仅接受 PDF、PPT、DOCX、TXT 格式文件\n- **并且** 文件大小不超过 40MB\n- **并且** 上传后显示文件名、文件大小\n- **并且** 提供移除按钮以删除已上传文件\n- **并且** 文件不符合要求时显示明确的错误提示\n\n#### FR-2.1.3 字符统计\n**作为** 用户  \n**我想要** 实时看到字符计数  \n**以便** 控制输入内容的长度  \n\n**验收标准:**\n- **当** 用户输入或删除文本时\n- **则** 实时更新字符计数显示\n- **并且** 使用 `TextEncoder().encode(text).length` 统计字符数\n- **并且** 显示格式为 \"当前字符数/5000\"\n- **并且** 字符数 < 300 时,计数器显示红色\n- **并且** 字符数 > 5000 时,计数器显示红色\n\n### 2.2 参数配置\n\n#### FR-2.2.1 长度参数\n**作为** 用户  \n**我想要** 选择输出文本的长度  \n**以便** 控制重写后的内容篇幅  \n\n**验收标准:**\n- **当** 用户选择长度参数时\n- **则** 提供三个选项: Normal(正常)、Concise(简洁)、Expanded(扩展)\n- **并且** 默认选项为 \"Normal\"\n- **并且** 通过下拉选择框进行选择\n\n#### FR-2.2.2 相似度参数\n**作为** 用户  \n**我想要** 选择输出文本与原文的相似度  \n**以便** 平衡改写程度和原意保留  \n\n**验收标准:**\n- **当** 用户选择相似度参数时\n- **则** 提供四个选项: Low(低)、Moderate(中等)、High(高)、Neutral(中性)\n- **并且** 默认选项为 \"Moderate\"\n- **并且** 通过下拉选择框进行选择\n\n#### FR-2.2.3 风格参数\n**作为** 用户  \n**我想要** 选择输出文本的写作风格  \n**以便** 适应不同的使用场景  \n\n**验收标准:**\n- **当** 用户选择风格参数时\n- **则** 提供九个选项: Neutral(中性)、Academic(学术)、Business(商务)、Creative(创意)、Technical(技术)、Friendly(友好)、Informal(非正式)、Reference(参考)、Custom(自定义)\n- **并且** 默认选项为 \"Neutral\"\n- **并且** 通过下拉选择框进行选择\n- **并且** 当选择 \"Custom\" 时,显示额外的文本输入框\n- **并且** 自定义风格描述最多 120 个字符\n- **并且** 未填写自定义描述时显示错误提示\n\n### 2.3 处理与输出\n\n#### FR-2.3.1 人性化处理\n**作为** 用户  \n**我想要** 点击\"Humanize\"按钮处理文本  \n**以便** 获得人性化的重写结果  \n\n**验收标准:**\n- **当** 用户点击\"Humanize\"按钮时\n- **则** 验证输入内容和参数\n- **并且** 输入有效时,发送请求到后端 API\n- **并且** 请求期间显示加载状态(按钮显示 spinner)\n- **并且** 输出区域显示骨架屏(skeleton)\n- **并且** 请求成功后显示重写结果\n- **并且** 请求失败时显示错误提示(toast + 内联错误)\n- **并且** 将成功结果保存到历史记录\n\n#### FR-2.3.2 结果展示\n**作为** 用户  \n**我想要** 清晰地查看重写结果  \n**以便** 评估输出质量  \n\n**验收标准:**\n- **当** 处理完成时\n- **则** 在左侧卡片中显示重写后的文本\n- **并且** 显示重写后的字符数\n- **并且** 提供\"复制\"、\"下载 .txt\"、\"重新生成\"三个操作按钮\n- **并且** 在右侧卡片中显示\"微调器\"\n- **并且** 微调器包含语气滑块、句长滑块等前端调整选项\n\n#### FR-2.3.3 复制功能\n**作为** 用户  \n**我想要** 复制重写后的文本  \n**以便** 在其他地方使用  \n\n**验收标准:**\n- **当** 用户点击\"复制\"按钮时\n- **则** 将重写文本复制到剪贴板\n- **并且** 显示成功提示(toast: \"已复制到剪贴板\")\n- **并且** 复制失败时显示错误提示\n\n#### FR-2.3.4 下载功能\n**作为** 用户  \n**我想要** 下载重写后的文本为 .txt 文件  \n**以便** 保存和分享结果  \n\n**验收标准:**\n- **当** 用户点击\"下载 .txt\"按钮时\n- **则** 生成包含重写文本的 .txt 文件\n- **并且** 文件名格式为 \"humanized_text_YYYYMMDD_HHMMSS.txt\"\n- **并且** 自动触发下载\n\n#### FR-2.3.5 重新生成功能\n**作为** 用户  \n**我想要** 重新生成结果  \n**以便** 获得不同的改写版本  \n\n**验收标准:**\n- **当** 用户点击\"重新生成\"按钮时\n- **则** 使用相同的输入和参数重新请求 API\n- **并且** 显示加载状态\n- **并且** 更新输出结果\n\n#### FR-2.3.6 清空功能\n**作为** 用户  \n**我想要** 清空当前输入和输出  \n**以便** 开始新的处理任务  \n\n**验收标准:**\n- **当** 用户点击\"Clear\"按钮时\n- **则** 清空文本输入框\n- **并且** 移除已上传的文件\n- **并且** 清空输出结果\n- **并且** 参数重置为默认值\n- **并且** 字符计数重置为 0/5000\n\n### 2.4 历史记录\n\n#### FR-2.4.1 历史记录显示\n**作为** 用户  \n**我想要** 查看最近的处理记录  \n**以便** 快速访问之前的结果  \n\n**验收标准:**\n- **当** 页面加载时\n- **则** 从 LocalStorage 读取历史记录\n- **并且** 显示最近 3 条记录\n- **并且** 每条记录显示: 前 100 字预览、参数摘要、时间戳\n- **并且** 按时间倒序排列\n\n#### FR-2.4.2 历史记录回填\n**作为** 用户  \n**我想要** 点击历史记录  \n**以便** 重新查看或编辑之前的内容  \n\n**验收标准:**\n- **当** 用户点击历史记录条目时\n- **则** 将对应的输入文本和参数回填到表单\n- **并且** 显示对应的输出结果\n- **并且** 不自动触发新的处理请求\n\n### 2.5 表单验证\n\n#### FR-2.5.1 输入验证\n**作为** 系统  \n**我需要** 验证用户输入  \n**以便** 确保数据有效性  \n\n**验收标准:**\n- **当** 用户提交表单时\n- **则** 验证以下规则:\n  - 模式为\"文本\"时: 文本长度 ≥ 300 且 ≤ 5000 字符\n  - 模式为\"文档\"时: 已上传有效文件\n  - 风格为\"自定义\"时: 已填写自定义描述(≤ 120 字符)\n- **并且** 验证失败时显示具体错误信息\n- **并且** 禁用提交按钮直到验证通过\n\n## 3. 非功能需求\n\n### 3.1 性能需求\n\n#### NFR-3.1.1 响应时间\n- API 响应时间 < 2000ms (模拟延迟 800-1200ms)\n- 页面首次加载时间 < 3s\n- 交互响应时间 < 100ms\n\n#### NFR-3.1.2 文档处理\n- 文档上传成功率 > 95%\n- 文档解析成功率 > 90%\n- 文档内容超过 5000 字符时自动截断并提示\n\n### 3.2 可用性需求\n\n#### NFR-3.2.1 无障碍性\n- 符合 WCAG AA 级别对比度标准\n- 所有交互控件具有适当的 `aria-*` 属性\n- 所有表单元素具有关联的 `label`\n- 支持键盘导航(Tab、Enter、Escape)\n- 屏幕阅读器友好\n\n#### NFR-3.2.2 响应式设计\n- 支持桌面端(≥1024px)\n- 支持平板端(768px - 1023px)\n- 支持移动端(< 768px)\n- 移动端参数条折叠为 Drawer\n- 移动端双栏布局改为单栏\n\n### 3.3 兼容性需求\n\n#### NFR-3.3.1 浏览器兼容\n- Chrome (最新版本及前 2 个版本)\n- Firefox (最新版本及前 2 个版本)\n- Safari (最新版本及前 2 个版本)\n- Edge (最新版本及前 2 个版本)\n\n### 3.4 安全性需求\n\n#### NFR-3.4.1 数据安全\n- 用户输入数据不存储到服务器(仅模拟演示)\n- 历史记录仅保存在客户端 LocalStorage\n- 文件上传前进行格式和大小验证\n- 防止 XSS 攻击(内容转义)\n\n### 3.5 可维护性需求\n\n#### NFR-3.5.1 代码质量\n- 使用 TypeScript 严格模式,不允许 `any` 类型\n- 通过 ESLint 和 Prettier 检查\n- 组件化开发,单一职责原则\n- 关键功能有单元测试覆盖(vitest)\n\n#### NFR-3.5.2 文档要求\n- README 包含项目说明、安装步骤、运行命令\n- 代码注释清晰,复杂逻辑有说明\n- API 接口有明确的类型定义\n\n## 4. 技术约束\n\n### 4.1 技术栈\n- 前端: Next.js 14 (App Router)\n- 语言: TypeScript\n- 样式: TailwindCSS\n- UI 组件: shadcn/ui\n- 表单: React Hook Form + Zod\n- 图标: lucide-react\n- 测试: vitest\n\n### 4.2 开发约束\n- 不集成真实 AI 模型\n- 使用模拟 API 接口进行演示\n- 优先考虑代码结构和可扩展性\n- 遵循 Next.js 和 React 最佳实践\n\n## 5. 用户界面需求\n\n### 5.1 页面布局(从上到下)\n1. 标题与副标题\n   - 主标题: \"Free AI Humanizer – 100% Human-Written Quality\"\n   - 副标题: 简短说明 + 免责声明 Tooltip\n2. 输入区域\n   - Tabs: Text / Document\n   - 文本输入框或文档上传区\n3. 参数控制条\n   - Length、Similarity、Style 三个下拉选择\n   - Style=Custom 时显示自定义输入框\n4. 操作按钮区\n   - Humanize (主按钮)\n   - Clear (次按钮)\n5. 输出区域\n   - 左侧: 结果卡片(Copy、Download、Regenerate)\n   - 右侧: 微调器卡片(前端参数调整)\n6. 历史记录区\n   - 最近 3 条记录,点击可回填\n7. 页脚\n   - 免责声明与相关链接\n\n### 5.2 交互状态\n- **空闲状态**: 等待用户输入\n- **输入中**: 实时字符计数,错误提示\n- **验证失败**: 禁用按钮,显示错误\n- **处理中**: 按钮 loading,输出区 skeleton\n- **成功**: 显示结果,保存历史\n- **错误**: Toast + 内联错误信息\n\n### 5.3 视觉设计\n- 主色调: #137fec (蓝色)\n- 背景色(浅色): #f6f7f8\n- 背景色(深色): #101922\n- 字体: Inter\n- 圆角: 0.25rem (默认), 0.5rem (lg), 0.75rem (xl)\n- 阴影: 使用 TailwindCSS shadow-* 系列\n\n## 6. SEO 需求\n\n### 6.1 元信息\n- 页面标题: \"Free AI Humanizer – Make AI Text Sound Human\"\n- 描述: \"Transform AI-generated content into natural, human-like text. Support text input and document upload (PDF/PPT/DOCX/TXT). 100% free and easy to use.\"\n- Open Graph 标签: 标题、描述、图片\n- Twitter Card 标签\n\n## 7. 免责声明\n\n### 7.1 内容\n本工具仅为演示目的,不保证能够通过任意\"AI 检测器\"。请用户合法、合规使用本工具,遵守学术诚信和职业道德。\n\n### 7.2 显示位置\n- 页面顶部标题旁的 Tooltip\n- 页面底部 Footer\n\n## 8. 验收标准 (DoD)\n\n### 8.1 功能完整性\n- ✅ 文本和文档两种输入路径均可用\n- ✅ 严格满足 min 300 / max 5000 字符限制\n- ✅ 三个参数(Length、Similarity、Style)可选并参与请求\n- ✅ Style=Custom 时需填写自定义描述(≤120 字符)\n- ✅ 输出可复制、下载、重新生成\n- ✅ 历史记录可回填\n- ✅ 移动端布局正常\n\n### 8.2 技术验收\n- ✅ 代码通过 `pnpm build` 构建\n- ✅ `pnpm test` 基础用例通过\n- ✅ ESLint 无错误\n- ✅ TypeScript 严格模式无错误\n- ✅ 无障碍性符合 WCAG AA 标准\n\n### 8.3 用户体验\n- ✅ 页面加载流畅,无明显卡顿\n- ✅ 错误提示明确友好\n- ✅ 加载状态清晰可见\n- ✅ 移动端操作便捷\n\n## 9. 项目里程碑\n\n### 9.1 阶段 1: 需求分析与设计 (当前)\n- 完成需求文档\n- 完成技术设计文档\n- 完成任务分解\n\n### 9.2 阶段 2: 前端基础架构\n- Next.js 项目初始化\n- shadcn/ui 组件集成\n- 表单验证框架搭建\n\n### 9.3 阶段 3: 核心功能开发\n- 输入管理(文本+文档)\n- 参数控制\n- 模拟 API 接口\n\n### 9.4 阶段 4: 输出与交互\n- 结果展示\n- 复制/下载/重新生成\n- 历史记录\n\n### 9.5 阶段 5: 优化与测试\n- 响应式适配\n- 无障碍性优化\n- 单元测试\n- 性能优化\n\n### 9.6 阶段 6: 部署上线\n- 构建优化\n- 文档完善\n- 部署配置\n\n## 10. 风险与假设\n\n### 10.1 风险\n- **风险 1**: 文档解析复杂度可能超出预期\n  - 缓解措施: 使用成熟的文档解析库,初期仅支持基础文本提取\n- **风险 2**: 移动端性能可能受限\n  - 缓解措施: 优化打包体积,使用代码分割,懒加载非关键组件\n\n### 10.2 假设\n- 用户具备基本的网页操作能力\n- 用户使用现代浏览器(支持 ES6+)\n- 用户上传的文档格式规范,可正常解析\n\n## 11. 术语表\n\n| 术语 | 定义 |\n|------|------|\n| AI Humanizer | 将 AI 生成的文本转换为更自然、更具人类风格的工具 |\n| WCAG AA | Web Content Accessibility Guidelines 2.0 AA 级别 |\n| shadcn/ui | 基于 Radix UI 和 Tailwind CSS 的组件库 |\n| Toast | 临时弹出提示消息 |\n| Skeleton | 加载时的占位符动画 |\n| LocalStorage | 浏览器本地存储 API |\n| App Router | Next.js 14 的新路由系统 |\n\n---\n\n**文档版本**: 1.0  \n**创建日期**: 2025-10-22  \n**最后更新**: 2025-10-22  \n**状态**: 待审核\n\n",
  "fileStats": {
    "size": 13924,
    "lines": 443,
    "lastModified": "2025-10-22T07:31:59.807Z"
  },
  "comments": []
}