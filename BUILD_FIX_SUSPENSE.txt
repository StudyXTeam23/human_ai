===============================================================
        ï¿½ï¿½ æ„å»ºé”™è¯¯ä¿®å¤ - Suspense è¾¹ç•Œ
===============================================================

âŒ é”™è¯¯ä¿¡æ¯:
-----------------------
useSearchParams() should be wrapped in a suspense boundary at page "/result"
Error occurred prerendering page "/result"

åŸå› :
Next.js 14+ è¦æ±‚ä½¿ç”¨ useSearchParams() çš„ç»„ä»¶å¿…é¡»åŒ…è£¹åœ¨ 
Suspense è¾¹ç•Œä¸­,ä»¥æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“å’Œé™æ€å¯¼å‡ºã€‚

===============================================================

âœ… å·²ä¿®å¤çš„é—®é¢˜:
-----------------------

1. result/page.tsx - æ·»åŠ  Suspense åŒ…è£¹
   âœ… å¯¼å…¥ Suspense
   âœ… åˆ›å»º ResultContent ç»„ä»¶
   âœ… ç”¨ Suspense åŒ…è£¹å¹¶æä¾› fallback
   âœ… ä¿®å¤æœªä½¿ç”¨çš„ error å˜é‡

2. app/page.tsx - æ¸…ç†æœªä½¿ç”¨å˜é‡
   âœ… ç§»é™¤æœªä½¿ç”¨çš„ CardHeader, CardTitle å¯¼å…¥
   âœ… ç§»é™¤æœªä½¿ç”¨çš„ fileBase64 çŠ¶æ€
   âœ… ä½¿ç”¨ _base64 è¡¨ç¤ºå¿½ç•¥çš„å‚æ•°

3. components/FileUpload.tsx - æ¸…ç†æœªä½¿ç”¨å˜é‡
   âœ… ç§»é™¤æœªä½¿ç”¨çš„ allowedTypes å˜é‡
   âœ… éªŒè¯é€»è¾‘å·²åœ¨ schemas/humanize.ts ä¸­

===============================================================

ğŸ“ ä¿®å¤è¯¦æƒ…:
-----------------------

result/page.tsx ç»“æ„:
```typescript
// å°†åŸç»„ä»¶æ”¹ä¸º ResultContent
function ResultContent() {
  const searchParams = useSearchParams();
  // ... åŸæœ‰é€»è¾‘
}

// å¯¼å‡ºçš„ç»„ä»¶ç”¨ Suspense åŒ…è£¹
export default function ResultPage() {
  return (
    <Suspense fallback={<LoadingSpinner />}>
      <ResultContent />
    </Suspense>
  );
}
```

===============================================================

ğŸ”„ æœåŠ¡å™¨ä¸Šé‡æ–°æ„å»º:
-----------------------

æ–¹å¼ 1: é‡æ–°ä¸Šä¼ æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶
cd /Users/yuyuan/studyx_human
tar -czf frontend-fixed.tar.gz \
  web/frontend/app/page.tsx \
  web/frontend/app/result/page.tsx \
  web/frontend/components/FileUpload.tsx

scp frontend-fixed.tar.gz root@your-server-ip:/root/home/yuyuan/
ssh root@your-server-ip
cd /root/home/yuyuan
tar -xzf frontend-fixed.tar.gz
cd studyx_human/web/frontend
pnpm build

æ–¹å¼ 2: åˆ†åˆ«ä¸Šä¼ æ–‡ä»¶
scp web/frontend/app/page.tsx \
    root@your-server-ip:/root/home/yuyuan/studyx_human/web/frontend/app/
scp web/frontend/app/result/page.tsx \
    root@your-server-ip:/root/home/yuyuan/studyx_human/web/frontend/app/result/
scp web/frontend/components/FileUpload.tsx \
    root@your-server-ip:/root/home/yuyuan/studyx_human/web/frontend/components/

ssh root@your-server-ip
cd /root/home/yuyuan/studyx_human/web/frontend
pnpm build

===============================================================

âœ… æ„å»ºåº”è¯¥æˆåŠŸ:
-----------------------
cd /root/home/yuyuan/studyx_human/web/frontend
pnpm build

é¢„æœŸè¾“å‡º:
âœ“ Compiled successfully
âœ“ Linting and checking validity of types
âœ“ Collecting page data
âœ“ Generating static pages (8/8)
âœ“ Finalizing page optimization

===============================================================

ğŸš€ å¯åŠ¨æœåŠ¡:
-----------------------
pm2 restart ai-humanizer-web
pm2 logs ai-humanizer-web

æˆ–ä½¿ç”¨ç®€å•å¯åŠ¨:
cd /root/home/yuyuan/studyx_human/web/frontend
pnpm start

===============================================================

ğŸ§ª éªŒè¯åŠŸèƒ½:
-----------------------
# 1. æ£€æŸ¥ç«¯å£
netstat -tulpn | grep 18200

# 2. æµ‹è¯•è®¿é—®
curl http://localhost:18200

# 3. æµè§ˆå™¨è®¿é—®
http://your-server-ip:18200

# 4. æµ‹è¯•ç»“æœé¡µ
è®¿é—®ä¸»é¡µ â†’ è¾“å…¥æ–‡æœ¬ â†’ ç‚¹å‡» Humanize â†’ åº”è¯¥èƒ½è·³è½¬åˆ°ç»“æœé¡µ

===============================================================

ğŸ“š ç›¸å…³ Next.js æ–‡æ¡£:
-----------------------
https://nextjs.org/docs/messages/missing-suspense-with-csr-bailout
https://nextjs.org/docs/app/api-reference/functions/use-search-params

===============================================================

âœ… æ‰€æœ‰æ„å»ºé”™è¯¯å·²ä¿®å¤!
-----------------------
- âœ… Suspense è¾¹ç•Œå·²æ·»åŠ 
- âœ… æœªä½¿ç”¨çš„å˜é‡å·²æ¸…ç†
- âœ… ESLint è­¦å‘Šå·²ä¿®å¤

ç°åœ¨å¯ä»¥æˆåŠŸæ„å»ºå¹¶éƒ¨ç½²å‰ç«¯!

===============================================================
