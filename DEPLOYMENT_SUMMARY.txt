===============================================================
        ï¿½ï¿½ Linux æœåŠ¡å™¨éƒ¨ç½²æ–‡æ¡£å·²åˆ›å»º
===============================================================

ğŸ“š å·²åˆ›å»ºçš„æ–‡æ¡£å’Œè„šæœ¬:

1. ğŸ“– DEPLOY_TO_LINUX.md
   - å®Œæ•´è¯¦ç»†çš„éƒ¨ç½²æŒ‡å— (5000+ è¡Œ)
   - åŒ…å«æ‰€æœ‰æ­¥éª¤å’Œé…ç½®è¯´æ˜
   - æ•…éšœæ’æŸ¥å’Œç»´æŠ¤æŒ‡å—

2. ğŸ“„ QUICK_DEPLOY.txt
   - å¿«é€Ÿéƒ¨ç½²é€ŸæŸ¥è¡¨
   - æ ¸å¿ƒå‘½ä»¤å’Œæ­¥éª¤
   - å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

3. ï¿½ï¿½ è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬:
   deploy-scripts/
   â”œâ”€â”€ setup-server.sh        # æœåŠ¡å™¨ç¯å¢ƒé…ç½®
   â”œâ”€â”€ deploy-backend.sh      # åç«¯è‡ªåŠ¨éƒ¨ç½²
   â”œâ”€â”€ deploy-frontend.sh     # å‰ç«¯è‡ªåŠ¨éƒ¨ç½²
   â””â”€â”€ setup-nginx.sh         # Nginx è‡ªåŠ¨é…ç½®

===============================================================

ğŸ¯ å¿«é€Ÿå¼€å§‹ (3 æ­¥éƒ¨ç½²):

æ­¥éª¤ 1: ä¸Šä¼ é¡¹ç›®åˆ°æœåŠ¡å™¨
-----------------------
# ä»æœ¬åœ°æ‰§è¡Œ
cd /Users/yuyuan/studyx_human
tar -czf studyx.tar.gz --exclude='node_modules' --exclude='venv' .
scp studyx.tar.gz root@your-server-ip:/var/www/

# åœ¨æœåŠ¡å™¨è§£å‹
ssh root@your-server-ip
cd /var/www && tar -xzf studyx.tar.gz

æ­¥éª¤ 2: è¿è¡Œè‡ªåŠ¨éƒ¨ç½²è„šæœ¬
-----------------------
cd /var/www/studyx_human

# é…ç½®ç¯å¢ƒ (é¦–æ¬¡)
sudo bash deploy-scripts/setup-server.sh

# éƒ¨ç½²åç«¯
bash deploy-scripts/deploy-backend.sh

# éƒ¨ç½²å‰ç«¯
bash deploy-scripts/deploy-frontend.sh

# é…ç½® Nginx
sudo bash deploy-scripts/setup-nginx.sh

æ­¥éª¤ 3: é…ç½® SSL å’Œ DNS
-----------------------
# DNS: æ·»åŠ  A è®°å½•æŒ‡å‘æœåŠ¡å™¨ IP
# SSL: è¿è¡Œ Certbot
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com
sudo certbot --nginx -d api.yourdomain.com

===============================================================

ğŸ”‘ å…³é”®é…ç½®:

åç«¯ .env æ–‡ä»¶:
  è·¯å¾„: web/backend/.env
  å¿…å¡«: OPENAI_API_KEY=sk-xxx...
  å¿…å¡«: CORS_ORIGINS=https://yourdomain.com
  æ³¨æ„: HTTP_PROXY å’Œ HTTPS_PROXY ç•™ç©º (æœåŠ¡å™¨ä¸éœ€è¦ä»£ç†)

å‰ç«¯ .env.production:
  è·¯å¾„: web/frontend/.env.production
  å¿…å¡«: NEXT_PUBLIC_API_URL=https://api.yourdomain.com

Nginx é…ç½®:
  ä¸»ç«™: yourdomain.com â†’ å‰ç«¯ (ç«¯å£ 3000)
  API: api.yourdomain.com â†’ åç«¯ (ç«¯å£ 8000)

===============================================================

ğŸ“Š æœåŠ¡æ¶æ„:

Internet
    â†“
Nginx (80/443) â† SSL ç»ˆæ­¢
    â”œâ”€â”€ yourdomain.com â†’ Next.js (3000) [PM2]
    â””â”€â”€ api.yourdomain.com â†’ FastAPI (8000) [Systemd]
                                â†“
                            OpenAI API

===============================================================

ğŸ› ï¸ æœåŠ¡ç®¡ç†å‘½ä»¤:

åç«¯ (Systemd):
  sudo systemctl status ai-humanizer-api
  sudo systemctl restart ai-humanizer-api
  sudo journalctl -u ai-humanizer-api -f

å‰ç«¯ (PM2):
  pm2 status
  pm2 restart ai-humanizer-web
  pm2 logs ai-humanizer-web

Nginx:
  sudo systemctl restart nginx
  sudo nginx -t
  sudo tail -f /var/log/nginx/error.log

===============================================================

âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•:

ç¯å¢ƒå‡†å¤‡:
  [ ] Python 3.11 å·²å®‰è£…
  [ ] Node.js 18 å·²å®‰è£…
  [ ] pnpm å·²å®‰è£…
  [ ] PM2 å·²å®‰è£…
  [ ] Nginx å·²å®‰è£…
  [ ] é˜²ç«å¢™å·²é…ç½® (80, 443 ç«¯å£å¼€æ”¾)

åç«¯éƒ¨ç½²:
  [ ] è™šæ‹Ÿç¯å¢ƒå·²åˆ›å»º
  [ ] ä¾èµ–å·²å®‰è£… (requirements-prod.txt)
  [ ] .env å·²é…ç½® (OPENAI_API_KEY)
  [ ] uploads ç›®å½•å·²åˆ›å»º
  [ ] Systemd æœåŠ¡å·²é…ç½®
  [ ] æœåŠ¡å·²å¯åŠ¨å¹¶è¿è¡Œ

å‰ç«¯éƒ¨ç½²:
  [ ] ä¾èµ–å·²å®‰è£… (pnpm install)
  [ ] .env.production å·²é…ç½®
  [ ] ç”Ÿäº§ç‰ˆæœ¬å·²æ„å»º (pnpm build)
  [ ] PM2 å·²å¯åŠ¨åº”ç”¨
  [ ] å¼€æœºè‡ªå¯å·²é…ç½®

Nginx é…ç½®:
  [ ] é…ç½®æ–‡ä»¶å·²åˆ›å»º
  [ ] è™šæ‹Ÿä¸»æœºå·²å¯ç”¨
  [ ] é…ç½®æµ‹è¯•é€šè¿‡ (nginx -t)
  [ ] æœåŠ¡å·²é‡å¯

DNS å’Œ SSL:
  [ ] DNS A è®°å½•å·²é…ç½®
  [ ] SSL è¯ä¹¦å·²ç”³è¯·
  [ ] HTTPS å¯è®¿é—®
  [ ] HTTP è‡ªåŠ¨è·³è½¬ HTTPS

æµ‹è¯•éªŒè¯:
  [ ] API å¥åº·æ£€æŸ¥: curl https://api.yourdomain.com/health
  [ ] å‰ç«¯å¯è®¿é—®: https://yourdomain.com
  [ ] æ–‡æœ¬å¤„ç†åŠŸèƒ½æ­£å¸¸
  [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
  [ ] ç»“æœé¡µæ˜¾ç¤ºæ­£å¸¸

===============================================================

ğŸ› æ•…éšœæ’æŸ¥:

1. åç«¯å¯åŠ¨å¤±è´¥
   â†’ sudo journalctl -u ai-humanizer-api -n 100
   â†’ æ£€æŸ¥ .env é…ç½®
   â†’ æ£€æŸ¥ç«¯å£å ç”¨: sudo netstat -tulpn | grep 8000

2. å‰ç«¯æ— æ³•è®¿é—®
   â†’ pm2 logs ai-humanizer-web --lines 100
   â†’ æ£€æŸ¥æ„å»ºæ–‡ä»¶: ls -la web/frontend/.next
   â†’ æ£€æŸ¥ç«¯å£: sudo netstat -tulpn | grep 3000

3. Nginx 502 é”™è¯¯
   â†’ sudo tail -f /var/log/nginx/error.log
   â†’ æ£€æŸ¥åç«¯/å‰ç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
   â†’ æ£€æŸ¥ Nginx é…ç½®: sudo nginx -t

4. æ— æ³•è¿æ¥ OpenAI
   â†’ æµ‹è¯•ç½‘ç»œ: curl -I https://api.openai.com
   â†’ æ£€æŸ¥ API Key: cat web/backend/.env | grep OPENAI
   â†’ æ£€æŸ¥ä»£ç†è®¾ç½® (åº”è¯¥ä¸ºç©º)

5. SSL è¯ä¹¦é—®é¢˜
   â†’ sudo certbot certificates
   â†’ sudo certbot renew --dry-run
   â†’ æ£€æŸ¥ DNS æ˜¯å¦æ­£ç¡®è§£æ

===============================================================

ğŸ“ è·å–å¸®åŠ©:

è¯¦ç»†æ–‡æ¡£: DEPLOY_TO_LINUX.md
å¿«é€ŸæŒ‡å—: QUICK_DEPLOY.txt

æŸ¥çœ‹æœåŠ¡æ—¥å¿—:
  åç«¯: sudo journalctl -u ai-humanizer-api -f
  å‰ç«¯: pm2 logs ai-humanizer-web
  Nginx: sudo tail -f /var/log/nginx/error.log

===============================================================

ğŸ‰ éƒ¨ç½²å®Œæˆå:

è®¿é—®ä½ çš„ç½‘ç«™: https://yourdomain.com
API æ–‡æ¡£: https://api.yourdomain.com/docs

ç›‘æ§å’Œç»´æŠ¤:
  - å®šæœŸæŸ¥çœ‹æ—¥å¿—
  - ç›‘æ§ç£ç›˜ç©ºé—´ (uploads ç›®å½•)
  - å®šæœŸå¤‡ä»½é…ç½®æ–‡ä»¶
  - ä¿æŒç³»ç»Ÿæ›´æ–°

===============================================================
