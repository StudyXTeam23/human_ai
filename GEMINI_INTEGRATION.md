# ğŸ¤– Gemini API é›†æˆè¯´æ˜

## âœ… å·²å®Œæˆé›†æˆ

### 1. å®‰è£…ä¾èµ–
- âœ… `google-generativeai` SDK å·²å®‰è£…

### 2. API é…ç½®
- âœ… API Key: `AIzaSyAb8RN6K_karyKOCTQDY0FftMdW9k7E4SCGKsfZ3-B-IcuOSAfQ`
- âœ… æ¨¡å‹: `gemini-2.0-flash-exp`
- âœ… é…ç½®æ–‡ä»¶: `web/backend/app/config.py`

### 3. æ ¸å¿ƒæ–‡ä»¶
- âœ… `web/backend/app/services/gemini_service.py` - Gemini æœåŠ¡
- âœ… `web/backend/app/api/humanize.py` - API ç«¯ç‚¹ (å·²æ›´æ–°)
- âœ… `web/backend/app/config.py` - é…ç½® (å·²æ·»åŠ  API Key)

---

## ğŸ¯ Prompt è®¾è®¡

### æ™ºèƒ½ Prompt æ„å»º
ç³»ç»Ÿä¼šæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„å‚æ•°è‡ªåŠ¨æ„å»ºæœ€ä¼˜ Prompt:

#### åŸºç¡€æŒ‡ä»¤
```
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ–‡æœ¬æ”¹å†™ä¸“å®¶ã€‚è¯·å°†ä¸‹é¢çš„ AI ç”Ÿæˆæ–‡æœ¬æ”¹å†™æˆæ›´è‡ªç„¶ã€
æ›´å…·äººç±»é£æ ¼çš„å†…å®¹,ä½¿å…¶è¯»èµ·æ¥æ›´æµç•…ã€æ›´çœŸå®ã€‚
```

#### æ ¹æ®å‚æ•°è°ƒæ•´

**1. Length (é•¿åº¦)**
- `Normal`: ä¿æŒåŸæ–‡é•¿åº¦,ä¸è¦æ˜æ˜¾å¢åŠ æˆ–å‡å°‘å­—æ•°
- `Concise`: ç®€åŒ–å†…å®¹,å»é™¤å†—ä½™,ä¿ç•™æ ¸å¿ƒè¦ç‚¹
- `Expanded`: æ‰©å±•å†…å®¹,æ·»åŠ ç»†èŠ‚ã€ä¾‹å­æˆ–è§£é‡Š

**2. Similarity (ç›¸ä¼¼åº¦)**
- `Low`: å¤§å¹…æ”¹å†™,æ”¹å˜å¥å¼ç»“æ„å’Œç”¨è¯
- `Moderate`: é€‚åº¦æ”¹å†™,ä¿æŒå¤§éƒ¨åˆ†åŸæ–‡ç»“æ„
- `High`: è½»å¾®æ”¹å†™,ä¸»è¦ä¼˜åŒ–ç”¨è¯å’Œè¯­æ°”
- `Neutral`: è‡ªç„¶æ”¹å†™,å¹³è¡¡ä¿æŒåŸæ„å’Œä¼˜åŒ–è¡¨è¾¾

**3. Style (é£æ ¼)**
- `Neutral`: ä¸­æ€§ã€å¹³è¡¡çš„è¯­æ°”
- `Academic`: å­¦æœ¯åŒ–ã€æ­£å¼çš„è¯­è¨€
- `Business`: ä¸“ä¸šã€å•†åŠ¡çš„è¯­æ°”
- `Creative`: åˆ›æ„æ€§ã€å¯Œæœ‰æƒ³è±¡åŠ›
- `Technical`: æŠ€æœ¯æ€§ã€ç²¾ç¡®çš„è¯­è¨€
- `Friendly`: å‹å¥½ã€äº²åˆ‡çš„è¯­æ°”
- `Informal`: è½»æ¾ã€éæ­£å¼çš„è¯­è¨€
- `Reference`: å‚è€ƒæ€§ã€ä¿¡æ¯æ€§çš„è¯­æ°”
- `Custom`: ç”¨æˆ·è‡ªå®šä¹‰é£æ ¼

### å®Œæ•´ Prompt ç¤ºä¾‹

```
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ–‡æœ¬æ”¹å†™ä¸“å®¶ã€‚è¯·å°†ä¸‹é¢çš„ AI ç”Ÿæˆæ–‡æœ¬æ”¹å†™æˆæ›´è‡ªç„¶ã€
æ›´å…·äººç±»é£æ ¼çš„å†…å®¹,ä½¿å…¶è¯»èµ·æ¥æ›´æµç•…ã€æ›´çœŸå®ã€‚

**æ”¹å†™è¦æ±‚:**
1. é•¿åº¦: ä¿æŒåŸæ–‡é•¿åº¦,ä¸è¦æ˜æ˜¾å¢åŠ æˆ–å‡å°‘å­—æ•°ã€‚
2. ç›¸ä¼¼åº¦: é€‚åº¦æ”¹å†™,ä¿æŒå¤§éƒ¨åˆ†åŸæ–‡ç»“æ„,ä¼˜åŒ–è¡¨è¾¾æ–¹å¼ã€‚
3. é£æ ¼: ä½¿ç”¨ä¸­æ€§ã€å¹³è¡¡çš„è¯­æ°”,é€‚åˆå¤§å¤šæ•°åœºæ™¯ã€‚

**é‡è¦è§„åˆ™:**
- ä¿æŒåŸæ–‡çš„æ ¸å¿ƒæ„æ€å’Œå…³é”®ä¿¡æ¯
- ä½¿æ–‡æœ¬æ›´è‡ªç„¶ã€æµç•…ã€æ˜“è¯»
- é¿å…æœºæ¢°åŒ–ã€æ¨¡æ¿åŒ–çš„è¡¨è¾¾
- ç¡®ä¿è¯­æ³•æ­£ç¡®ã€é€»è¾‘æ¸…æ™°
- ç›´æ¥è¾“å‡ºæ”¹å†™åçš„æ–‡æœ¬,ä¸è¦æ·»åŠ ä»»ä½•è§£é‡Šæˆ–å‰ç¼€

**åŸæ–‡:**
[ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬]

**æ”¹å†™åçš„æ–‡æœ¬:**
```

---

## ğŸš€ ä½¿ç”¨æµç¨‹

### 1. å¯åŠ¨åç«¯
```bash
cd /Users/yuyuan/studyx_human/web/backend
source venv/bin/activate
uvicorn app.main:app --reload
```

### 2. API è°ƒç”¨æµç¨‹
```
ç”¨æˆ·è¾“å…¥ â†’ å‰ç«¯éªŒè¯ â†’ å‘é€è¯·æ±‚
    â†“
åç«¯æ¥æ”¶ â†’ æ„å»º Prompt â†’ è°ƒç”¨ Gemini API
    â†“
Gemini å¤„ç† â†’ è¿”å›ç»“æœ â†’ å‰ç«¯å±•ç¤º
```

### 3. å®é™…è°ƒç”¨ç¤ºä¾‹

**è¯·æ±‚:**
```json
{
  "source": {
    "mode": "text",
    "text": "The rain tapped gently against the window..."
  },
  "params": {
    "length": "Normal",
    "similarity": "Moderate",
    "style": "Creative"
  }
}
```

**Gemini ä¼šæ”¶åˆ°çš„ Prompt:**
```
ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ–‡æœ¬æ”¹å†™ä¸“å®¶...

**æ”¹å†™è¦æ±‚:**
1. é•¿åº¦: ä¿æŒåŸæ–‡é•¿åº¦...
2. ç›¸ä¼¼åº¦: é€‚åº¦æ”¹å†™...
3. é£æ ¼: ä½¿ç”¨åˆ›æ„æ€§ã€å¯Œæœ‰æƒ³è±¡åŠ›çš„è¡¨è¾¾,å¢åŠ æ–‡å­¦è‰²å½©ã€‚

**åŸæ–‡:**
The rain tapped gently against the window...

**æ”¹å†™åçš„æ–‡æœ¬:**
```

**å“åº”:**
```json
{
  "content": "Rain whispered secrets against the glass pane...",
  "chars": 1245,
  "processingTime": 2340
}
```

---

## ğŸ“Š æ€§èƒ½ç‰¹ç‚¹

### Gemini 2.0 Flash Exp ç‰¹æ€§
- âš¡ å“åº”é€Ÿåº¦: é€šå¸¸ 1-3 ç§’
- ğŸ¯ è´¨é‡: é«˜è´¨é‡çš„æ–‡æœ¬æ”¹å†™
- ğŸ’° æˆæœ¬: å…è´¹é…é¢å……è¶³
- ğŸŒ è¯­è¨€: æ”¯æŒä¸­è‹±æ–‡æ··åˆ

### å®é™…å¤„ç†æ—¶é—´
- çŸ­æ–‡æœ¬ (300-1000 å­—ç¬¦): ~1-2 ç§’
- ä¸­ç­‰æ–‡æœ¬ (1000-3000 å­—ç¬¦): ~2-3 ç§’
- é•¿æ–‡æœ¬ (3000-5000 å­—ç¬¦): ~3-5 ç§’

---

## ğŸ”’ å®‰å…¨æ€§

### API Key ç®¡ç†
- âœ… å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ (`config.py`)
- âœ… ä¸æš´éœ²ç»™å‰ç«¯
- âœ… å¯é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–

### ç¯å¢ƒå˜é‡æ–¹å¼ (æ¨èç”Ÿäº§ç¯å¢ƒ)
```bash
# åˆ›å»º .env æ–‡ä»¶
echo "GEMINI_API_KEY=ä½ çš„çœŸå®KEY" > web/backend/.env
echo "GEMINI_MODEL=gemini-2.0-flash-exp" >> web/backend/.env
```

---

## ğŸ§ª æµ‹è¯• Gemini é›†æˆ

### æ–¹æ³• 1: é€šè¿‡å‰ç«¯æµ‹è¯•

1. å¯åŠ¨åç«¯å’Œå‰ç«¯
2. è®¿é—® http://localhost:3000
3. è¾“å…¥æ–‡æœ¬ (300+ å­—ç¬¦)
4. é€‰æ‹©å‚æ•°
5. ç‚¹å‡» "Humanize"
6. ç­‰å¾… 1-3 ç§’
7. æŸ¥çœ‹ Gemini ç”Ÿæˆçš„ç»“æœ

### æ–¹æ³• 2: ç›´æ¥ API æµ‹è¯•

```bash
curl -X POST "http://localhost:8000/api/v1/humanize" \
  -H "Content-Type: application/json" \
  -d '{
    "source": {
      "mode": "text",
      "text": "The rain tapped gently against the window pane, a soothing rhythm that calmed my restless soul. Curled up by the fireplace with a good book, I felt a profound sense of peace wash over me. The world outside could wait. This moment was mine alone, a sanctuary from the chaos of daily life. The flickering flames cast dancing shadows on the walls."
    },
    "params": {
      "length": "Normal",
      "similarity": "Moderate",
      "style": "Creative"
    }
  }'
```

### æ–¹æ³• 3: Swagger UI æµ‹è¯•

1. è®¿é—® http://localhost:8000/docs
2. æ‰¾åˆ° `POST /api/v1/humanize` ç«¯ç‚¹
3. ç‚¹å‡» "Try it out"
4. å¡«å†™è¯·æ±‚ä½“
5. ç‚¹å‡» "Execute"
6. æŸ¥çœ‹å“åº”

---

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: API Key æ— æ•ˆ
**æ£€æŸ¥:**
- ç¡®è®¤ Key æ˜¯å¦æ­£ç¡®å¤åˆ¶
- æ£€æŸ¥ `config.py` ä¸­çš„é…ç½®
- ç¡®è®¤ Gemini API é…é¢æœªç”¨å®Œ

### Q2: å“åº”æ—¶é—´è¿‡é•¿
**åŸå› :**
- æ–‡æœ¬è¿‡é•¿ (æ¥è¿‘ 5000 å­—ç¬¦)
- ç½‘ç»œå»¶è¿Ÿ
- Gemini API è´Ÿè½½

**è§£å†³:**
- ä¼˜åŒ–ç½‘ç»œè¿æ¥
- è€ƒè™‘æ·»åŠ è¶…æ—¶å¤„ç†

### Q3: è¿”å›å†…å®¹æ ¼å¼ä¸å¯¹
**åŸå› :**
- Gemini å¯èƒ½æ·»åŠ äº†é¢å¤–è¯´æ˜

**è§£å†³:**
- Prompt ä¸­å·²æ·»åŠ  "ç›´æ¥è¾“å‡ºæ”¹å†™åçš„æ–‡æœ¬" æŒ‡ä»¤
- å¦‚éœ€è¦,å¯æ·»åŠ åå¤„ç†é€»è¾‘

---

## ğŸ“ˆ ç›‘æ§ä¸æ—¥å¿—

### æŸ¥çœ‹è¯·æ±‚æ—¥å¿—
åç«¯ç»ˆç«¯ä¼šæ˜¾ç¤ºæ¯æ¬¡è¯·æ±‚:
```
INFO:     127.0.0.1:51234 - "POST /api/v1/humanize HTTP/1.1" 200 OK
```

### æ·»åŠ è¯¦ç»†æ—¥å¿— (å¯é€‰)
åœ¨ `gemini_service.py` ä¸­æ·»åŠ :
```python
import logging
logger = logging.getLogger(__name__)

# åœ¨è°ƒç”¨å‰
logger.info(f"Calling Gemini API with {len(text)} chars")

# åœ¨è¿”å›å
logger.info(f"Gemini responded in {processing_time}ms")
```

---

## ğŸ¯ ä¼˜åŒ–å»ºè®®

### 1. æ·»åŠ ç¼“å­˜ (å¯é€‰)
å¯¹ç›¸åŒè¾“å…¥ç¼“å­˜ç»“æœ,å‡å°‘ API è°ƒç”¨

### 2. æ·»åŠ é‡è¯•æœºåˆ¶
ç½‘ç»œå¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•

### 3. æ·»åŠ è¶…æ—¶å¤„ç†
è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ (å¦‚ 30 ç§’)

### 4. æ‰¹é‡å¤„ç† (æœªæ¥)
æ”¯æŒä¸€æ¬¡å¤„ç†å¤šæ®µæ–‡æœ¬

---

## âœ… éªŒè¯æ¸…å•

æµ‹è¯•ä»¥ä¸‹åœºæ™¯ç¡®ä¿é›†æˆæˆåŠŸ:

- [ ] çŸ­æ–‡æœ¬ (300 å­—ç¬¦) å¤„ç†æ­£å¸¸
- [ ] é•¿æ–‡æœ¬ (5000 å­—ç¬¦) å¤„ç†æ­£å¸¸
- [ ] ä¸åŒ Length å‚æ•°ç”Ÿæˆä¸åŒç»“æœ
- [ ] ä¸åŒ Style å‚æ•°ç”Ÿæˆä¸åŒé£æ ¼
- [ ] Custom style æ­£ç¡®åº”ç”¨
- [ ] é”™è¯¯å¤„ç†æ­£å¸¸ (å¦‚ç½‘ç»œå¤±è´¥)
- [ ] å“åº”æ—¶é—´åœ¨å¯æ¥å—èŒƒå›´å†…
- [ ] API æ–‡æ¡£æ˜¾ç¤ºæ­£ç¡®

---

**Gemini API é›†æˆå®Œæˆ!** ğŸ‰

ç°åœ¨ç‚¹å‡» "Humanize" æŒ‰é’®å°†è°ƒç”¨çœŸå®çš„ Gemini AI è¿›è¡Œæ–‡æœ¬å¤„ç†!

